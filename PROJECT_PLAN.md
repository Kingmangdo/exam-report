# 독강영어학원 데일리 영어성적표 시스템 - 수행 계획서

## 1. 프로젝트 개요

### 1.1 목적
독강영어학원에서 학생들의 일일 영어 평가 성적을 효율적으로 관리하고, **성적표를 학부모에게 카카오톡 알림톡으로 자동 발송**하는 웹 기반 성적표 시스템 구축

### 1.2 주요 기능
- 학생 정보 관리 (등록, 수정, 삭제)
  - 학부모 연락처 정보 포함
- 일일 성적 입력 및 관리
- 성적 조회 및 검색
- 성적 통계 및 시각화 (그래프, 차트)
- 성적표 생성 및 카카오톡 알림톡 발송 ⭐ **핵심 기능**
- 기간별 성적 분석
- **비개발자도 쉽게 사용할 수 있는 직관적인 UI** ⭐

## 2. 기술 스택 (최종 확정) ✅

### 2.1 프론트엔드
- **Vue.js 3**: 현대적인 UI 구축, 비개발자 친화적
- **TypeScript**: 타입 안정성 확보 (선택사항)
- **Tailwind CSS**: 빠른 UI 개발
- **Chart.js** 또는 **Vue-Chartjs**: 성적 데이터 시각화

### 2.2 백엔드
- **Node.js + Express**: RESTful API 설계
- **Express.js**: 웹 프레임워크

### 2.3 데이터베이스
- **SQLite**: 150명 규모 운영 가능 ✅
  - 소규모~중규모 애플리케이션에 적합
  - 동시 접속자 4명 (담당자) 수준에서 충분한 성능
  - 읽기 중심 워크로드에 최적화
  - **주의사항**: 향후 확장 시 PostgreSQL로 마이그레이션 가능하도록 설계
- **비개발자도 쉽게 접근 가능한 구조** (CSV 내보내기/가져오기 기능 포함)

### 2.4 카카오톡 알림톡 연동
- **카카오톡 알림톡 발송 전문 업체 API 연동**
  - 알리고, 카카오비즈니스, 카카오톡 채널 등
- 알림톡 템플릿 관리
- 발송 이력 관리 및 로그

### 2.5 배포
- **Vercel**: 프론트엔드 배포 ✅
  - Vue.js 배포에 최적화
  - 무료 티어 제공
  - 자동 배포 및 CDN
- **Railway**: 백엔드 배포 ✅
  - Node.js + Express 배포에 적합
  - Heroku보다 더 나은 성능
  - 사용하기 쉬운 인터페이스
  - 합리적인 가격 ($5/월)

## 3. 프로젝트 단계별 수행 계획

### Phase 1: 프로젝트 초기 설정 (1일)
- [ ] 프로젝트 구조 설계
- [ ] 개발 환경 설정
- [ ] 필요한 패키지 및 의존성 설치
- [ ] Git 저장소 초기화 (선택사항)

### Phase 2: 데이터 모델 설계 (1일)
- [ ] 학생 정보 스키마 설계
  - 학생 ID, 이름, 학년, 반, 연락처
  - **학부모 이름, 학부모 연락처 (카카오톡 발송용)** ⭐
- [ ] 성적 데이터 스키마 설계
  - 시험일자 (yy-mm-dd 형식)
  - 평가 영역: RT점수, 단어시험, 과제점수, 수업태도 (4개 영역)
  - RT점수: 총 문제수 (시험마다 다름), 맞춘 문제수 → 점수 자동 계산
  - 단어시험: 총 문제수 (시험마다 다름), 맞춘 문제수 → 점수 자동 계산 (84점 이하 시 "재시험" 표기)
  - 과제점수: 0-100점 만점
  - 수업태도: 0-100점 만점
  - 총점: 4개 영역 합계 및 평균 (가중치 25% 동일)
  - 반 평균 점수 (계산)
  - 이전 성적과 비교 데이터
  - 코멘트/평가 문구
  - 종합 문구 (원장 입력 가능)
- [ ] 카카오톡 발송 이력 스키마 설계
  - 발송일시, 수신자, 발송 상태, 실패 사유 등
- [ ] 데이터베이스 스키마 생성

### Phase 3: 백엔드 API 개발 (4-5일)
- [ ] 학생 관리 API
  - GET /api/students (목록 조회)
  - POST /api/students (등록)
  - PUT /api/students/:id (수정)
  - DELETE /api/students/:id (삭제)
- [ ] 성적 관리 API
  - GET /api/scores (목록 조회, 필터링)
  - POST /api/scores (입력)
  - PUT /api/scores/:id (수정)
  - DELETE /api/scores/:id (삭제)
- [ ] 통계 API
  - GET /api/statistics/:studentId (학생별 통계)
  - GET /api/statistics/class/:classId (반별 통계)
- [ ] **카카오톡 알림톡 발송 API** ⭐
  - POST /api/kakao/send (성적표 발송)
    - 성적 입력 시 자동 발송 트리거
  - GET /api/kakao/history (발송 이력 조회)
  - POST /api/kakao/template (템플릿 관리)
  - 알림톡 메시지: "안녕하세요. 독강영어학원입니다. [학생이름]의 [날짜] 영어 성적표가 도착했습니다. 확인해주세요."
    - 날짜 형식: yy-mm-dd
- [ ] 성적표 생성 API
  - GET /api/report/generate/:studentId/:date (성적표 생성)
  - GET /api/report/preview/:studentId/:date (미리보기)
  - GET /api/report/:reportId (성적표 링크 접근)
    - 인증: 학생이름 + 학부모 핸드폰 뒷4자리 입력 필요
    - 유효기간: 발송 후 7일
  - POST /api/report/verify (성적표 접근 인증)
- [ ] 반 평균 계산 API
  - GET /api/statistics/class-average/:classId/:date (반 평균 계산)
- [ ] 이전 성적 비교 API
  - GET /api/scores/compare/:studentId/:date (이전 성적과 비교)
- [ ] 종합 문구 관리 API
  - GET /api/settings/comment (종합 문구 조회)
  - POST /api/settings/comment (종합 문구 저장/수정)

### Phase 4: 프론트엔드 개발 (5-6일)
- [ ] **비개발자 친화적 UI 설계** ⭐
  - 직관적인 아이콘과 레이블
  - 단계별 가이드 및 도움말
  - 명확한 에러 메시지
- [ ] 레이아웃 및 네비게이션 구성
- [ ] 학생 관리 페이지
  - 학생 목록 표시
  - 학생 등록/수정 폼 (학부모 정보 포함)
  - **Excel/CSV 일괄 등록 기능** (비개발자 편의)
- [ ] 성적 입력 페이지
  - 날짜 선택 (yy-mm-dd 형식)
  - 학생 선택
  - 영역별 점수 입력
    - **RT점수**: 총 문제수 (시험마다 다름), 맞춘 문제수 입력 → 점수 자동 계산
    - **단어시험**: 총 문제수 (시험마다 다름), 맞춘 문제수 입력 → 점수 자동 계산 (84점 이하 시 "재시험" 표기)
    - **과제점수**: 0-100점 직접 입력
    - **수업태도**: 0-100점 직접 입력
  - 총점 자동 계산 (합계 + 평균, 가중치 25% 동일)
  - 코멘트/평가 문구 입력
  - **같은 날짜 같은 학생 중복 입력 시 마지막 입력만 유지 (경고 표시)** ⚠️
  - **성적 저장 시 자동으로 카카오톡 발송** ⭐
  - **학부모 연락처 없으면 별도 알림 표시** ⚠️
  - **발송 실패 시 1회 재시도 + 별도 알림 표시** ⚠️
- [ ] 성적 조회 페이지
  - 학생별 성적 조회
  - 기간별 필터링
  - 성적 그래프/차트 표시
- [ ] **카카오톡 발송 페이지** ⭐
  - 발송 대상 선택 (학생/반/전체)
  - 발송 전 미리보기
  - 발송 실행 및 결과 확인
  - 발송 이력 조회
- [ ] 대시보드 페이지
  - 전체 통계 요약
  - 최근 성적 현황
  - **오늘 발송 현황**

### Phase 5: 데이터 시각화 (2일)
- [ ] 학생별 성적 추이 그래프 (라인 차트)
- [ ] 영역별 성적 분포 (바 차트)
- [ ] 등급 분포 (파이 차트)
- [ ] 기간별 평균 점수 비교

### Phase 6: 성적표 생성 및 카카오톡 발송 기능 (3-4일) ⭐
- [ ] 성적표 템플릿 디자인
  - **심플하고 깔끔한 스타일, 파란색 중 무거운 톤** 🎨
  - **학원 로고 포함** 🎨
  - 학생 이름, 날짜 (yy-mm-dd)
  - 영역별 점수 표시
    - RT점수: 맞춘 문제수/총 문제수 (점수)
    - 단어시험: 맞춘 문제수/총 문제수 (점수) - **84점 이하 시 빨간색으로 "재시험" 표기** ⚠️
    - 과제점수: 점수 표시
    - 수업태도: 점수 표시
  - 총점 표시 (합계 + 평균)
  - **반 평균 점수 표시** ✅
  - **이전 성적과 비교 (상승/하락 화살표 및 점수 차이)** ✅
  - **코멘트/평가 문구 표시** ✅
  - **하단 종합 문구 (원장이 입력한 내용)** ✅
- [ ] 성적표 웹 페이지 생성 (링크로 접근)
  - 고유 URL 생성 (학생별, 날짜별)
  - **인증 페이지: 학생이름 + 학부모 핸드폰 뒷4자리 입력** 🔒
  - **링크 유효기간: 발송 후 7일** ⏰
  - 만료된 링크 접근 시 안내 메시지
- [ ] 카카오톡 알림톡 템플릿 구성
  - 메시지: "안녕하세요. 독강영어학원입니다. [학생이름]의 [날짜] 영어 성적표가 도착했습니다. 확인해주세요."
  - 성적표 링크 포함
- [ ] 카카오톡 발송 전문 업체 API 연동
  - API 키 설정 (환경변수로 관리)
  - 발송 요청 및 응답 처리
  - **발송 실패 시 1회 재시도 + 별도 알림 표시** ⚠️
  - 성적 입력 시 자동 발송 트리거
- [ ] 발송 이력 관리
  - 발송 성공/실패 로그
  - 재발송 기능
  - **학부모 연락처 없음 알림 표시** ⚠️

### Phase 7: 비개발자 친화적 기능 추가 (2일) ⭐
- [ ] 설정 관리 페이지
  - 카카오톡 API 키 설정 (간단한 입력 폼)
  - 알림톡 템플릿 커스터마이징
  - **종합 문구 관리 (원장이 직접 입력/수정 가능)** ✅
- [ ] 데이터 백업/복원 기능
  - 원클릭 백업 (JSON/CSV)
  - 원클릭 복원
- [ ] 사용자 가이드 및 도움말
  - 각 페이지별 간단한 설명
  - FAQ 섹션
- [ ] 로그 및 모니터링
  - 발송 실패 알림
  - **학부모 연락처 없음 알림** ⚠️
  - 시스템 상태 확인
- [ ] 알림 관리 페이지
  - 발송 실패 목록
  - 연락처 없음 학생 목록
  - 재발송 기능

### Phase 8: 테스트 및 최적화 (2일)
- [ ] 기능 테스트
- [ ] **비개발자 사용자 테스트** (중요) ⭐
- [ ] UI/UX 개선
- [ ] 성능 최적화
- [ ] 에러 처리 강화

### Phase 9: 문서화 및 배포 (1-2일)
- [ ] **비개발자용 사용자 매뉴얼 작성** ⭐
  - 스크린샷 포함 상세 가이드
  - 단계별 튜토리얼
  - 문제 해결 가이드
- [ ] 개발 문서 작성
- [ ] 배포 준비
- [ ] 최종 점검

## 4. 프로젝트 구조 (제안)

```
exam-report/
├── frontend/              # 프론트엔드 애플리케이션
│   ├── src/
│   │   ├── components/   # 재사용 가능한 컴포넌트
│   │   ├── pages/        # 페이지 컴포넌트
│   │   ├── services/     # API 호출 서비스
│   │   ├── utils/        # 유틸리티 함수
│   │   └── types/        # TypeScript 타입 정의
│   └── package.json
├── backend/              # 백엔드 API 서버
│   ├── routes/           # API 라우트
│   ├── models/           # 데이터 모델
│   ├── controllers/      # 컨트롤러
│   ├── middleware/       # 미들웨어
│   └── database/         # 데이터베이스 설정
├── database/             # 데이터베이스 파일
├── docs/                 # 문서
└── README.md
```

## 5. 주요 화면 구성 (제안)

1. **대시보드**
   - 오늘의 성적 입력 현황
   - 최근 성적 추이
   - 주요 통계 요약

2. **학생 관리**
   - 학생 목록 (테이블)
   - 학생 등록/수정 모달

3. **성적 입력**
   - 날짜 선택 (yy-mm-dd)
   - 학생 선택
   - 영역별 점수 입력
     - RT점수: 총 문제수/맞춘 문제수 (시험마다 다름)
     - 단어시험: 총 문제수/맞춘 문제수 (시험마다 다름, 84점 이하 시 빨간색 "재시험" 표기)
     - 과제점수: 0-100점
     - 수업태도: 0-100점
   - 총점 자동 계산 (합계 + 평균, 가중치 25% 동일)
   - 코멘트/평가 문구 입력
   - 저장 시 자동 카카오톡 발송
   - 중복 입력 시 마지막만 유지 (경고 표시)

4. **성적 조회**
   - 학생별 조회
   - 기간별 필터링
   - 성적 그래프 표시
   - 이전 성적과 비교 표시
   - 성적표 다운로드

5. **성적표 보기 (학부모용)**
   - 학생이름 + 핸드폰 뒷4자리로 인증
   - 성적표 상세 정보 표시
   - 반 평균, 이전 성적 비교
   - 종합 문구 표시

6. **통계 분석**
   - 반별 평균 성적
   - 영역별 성적 분포
   - 기간별 성적 추이

7. **설정 관리**
   - 카카오톡 API 키 설정
   - 종합 문구 관리 (원장 입력)
   - 알림 관리

## 6. 개발 우선순위

### 필수 기능 (MVP - Minimum Viable Product)
1. 학생 정보 관리 (학부모 연락처 포함)
2. 성적 입력 및 조회
3. **성적표 생성 및 카카오톡 알림톡 발송** ⭐
4. 발송 이력 관리

### 추가 기능 (향후 확장)
1. 고급 통계 분석
2. 자동 발송 스케줄링 (특정 시간 자동 발송)
3. 사용자 권한 관리
4. 데이터 백업/복원
5. 알림톡 템플릿 다양화

## 7. 예상 개발 기간

- **총 개발 기간**: 약 20-25일 (개발자 1명 기준)
- **MVP 완성**: 약 14일 (카카오톡 발송 + 인증 기능 포함)
- **전체 기능 완성**: 약 25일

**참고**: 
- 성적표 인증 기능 (학생이름 + 핸드폰 뒷4자리)
- 링크 유효기간 관리 (7일)
- 이전 성적 비교 기능
- 종합 문구 관리 기능
- 반 평균 계산 기능
등이 추가되어 개발 기간이 소폭 증가했습니다.

## 8. 변경 이력

### v1.2 (상세 요구사항 반영)
- ✅ 점수 계산 로직 상세화 (시험마다 총 문제수 다름, 가중치 25% 동일)
- ✅ 성적표 인증 기능 (학생이름 + 핸드폰 뒷4자리)
- ✅ 링크 유효기간 관리 (7일)
- ✅ 성적표 디자인 상세화 (파란색 무거운 톤, 로고 포함)
- ✅ 반 평균, 이전 성적 비교, 코멘트, 종합 문구 기능 추가
- ✅ 단어시험 84점 이하 빨간색 표기
- ✅ 예외 상황 처리 로직 추가 (연락처 없음, 발송 실패, 중복 입력)

### v1.1 (업데이트)
- ✅ 카카오톡 알림톡 발송 기능 추가
- ✅ 비개발자 친화적 UI/UX 강화
- ✅ 학부모 연락처 관리 기능 추가
- ✅ 발송 이력 관리 기능 추가
- ✅ 데이터 백업/복원 기능 추가

## 9. 확인된 사항 ✅

### 9.1 카카오톡 알림톡 관련
- ✅ **발송 업체**: 선정 중 (나중에 API 연동)
- ✅ **발송 방식**: 링크로 보내기 (웹 페이지 링크)
- ✅ **발송 시점**: 성적 입력 즉시 자동 발송
- ✅ **알림톡 메시지**: 
  ```
  안녕하세요. 독강영어학원입니다.
  [학생이름]의 [날짜] 영어 성적표가 도착했습니다. 확인해주세요.
  ```
  - 날짜 형식: yy-mm-dd

### 9.2 성적표 구성
- ✅ **포함 정보**: 학생이름, 날짜, 영역별 점수, 총점
- ✅ **평가 영역**: 
  1. **RT점수**: 총 문제수/맞춘 문제수로 점수 계산
  2. **단어시험**: 총 문제수/맞춘 문제수로 점수 계산 (84점 이하 시 "재시험" 표기)
  3. **과제점수**: 직접 입력
  4. **수업태도**: 직접 입력

## 10. 확인된 상세 요구사항 ✅

### 10.1 점수 계산 및 범위
- ✅ **RT점수/단어시험**: 시험마다 총 문제수 다름 (성적 입력 시 함께 입력)
- ✅ **과제점수/수업태도**: 100점 만점
- ✅ **총점**: 4개 영역 합계 + 평균 표시
- ✅ **가중치**: 25% 동일

### 10.2 성적표 링크 및 보안
- ✅ **링크 생성**: 학생별 개별 발송
- ✅ **인증 방식**: 학생이름 + 학부모 핸드폰 뒷4자리 입력
- ✅ **유효기간**: 발송 후 7일

### 10.3 성적표 디자인 및 추가 정보
- ✅ **등급 표시**: 없음
- ✅ **반 평균**: 포함
- ✅ **반 순위**: 없음
- ✅ **이전 성적 비교**: 필요 (상승/하락 표시)
- ✅ **코멘트/평가 문구**: 필요
- ✅ **디자인**: 심플하고 깔끔한 스타일, 파란색 중 무거운 톤
- ✅ **학원 로고**: 포함
- ✅ **단어시험 84점 이하**: 점수 표기하는 곳에 빨간색으로 표기
- ✅ **종합 문구**: 성적표 하단에 원장이 직접 입력 가능

### 10.4 시스템 운영
- ✅ **사용자 수**: 성적 입력 담당자 4명
- ✅ **학생 수**: 100-150명 (유동적)
- ✅ **하루 평균 성적 입력**: 50명

### 10.5 예외 상황 처리
- ✅ **학부모 연락처 없음**: 별도 알림 표시
- ✅ **발송 실패**: 1회 재시도 + 별도 알림 표시
- ✅ **중복 입력**: 마지막 입력만 유지 (덮어쓰기)

## 11. 다음 단계

1. ✅ 기본 요구사항 확인 완료
2. ⏳ 추가 상세 질문 사항 확인 (위 10번 섹션 참조)
3. 기술 스택 최종 결정
4. 카카오톡 API 연동 방법 확인 (업체 선정 후)
5. 프로젝트 초기 설정 시작

---

**작성일**: 2026년
**작성자**: AI Assistant
**버전**: 1.3 (모든 상세 요구사항 반영 완료)
**마지막 업데이트**: 2026년 1월

---

## 📋 개발 준비 완료

모든 요구사항이 확인되었습니다. 다음 단계로 개발을 시작할 수 있습니다.

### 다음 단계
1. 기술 스택 최종 결정
2. 프로젝트 초기 설정
3. 데이터베이스 스키마 설계
4. 개발 시작
