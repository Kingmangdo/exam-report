# 독강영어학원 ERP 시스템 - 운영 가이드

**작성일**: 2026년 2월  
**대상**: 시스템 관리자 및 운영 담당자

---

## 📋 목차

1. [초기 설정](#1-초기-설정)
2. [일상 운영](#2-일상-운영)
3. [데이터 백업](#3-데이터-백업)
4. [문제 해결](#4-문제-해결)
5. [주의사항](#5-주의사항)
6. [자주 묻는 질문 (FAQ)](#6-자주-묻는-질문-faq)

---

## 1. 초기 설정

### 1.1 시스템 접속
1. 웹 브라우저에서 시스템 URL 접속
2. 관리자 계정으로 로그인
   - **관리자 계정**: 원장님 계정
   - **강사 계정**: 각 강사별 계정

### 1.2 초기 데이터 입력

#### 학생 정보 입력
1. **Excel 일괄 업로드 (권장)**
   - `학생 관리` → `Excel 양식 다운로드`
   - 양식에 학생 정보 입력
   - `Excel 업로드`로 일괄 등록

2. **개별 등록**
   - `학생 관리` → `+ 학생 등록`
   - 필수 정보: 학생 이름, 학부모 연락처
   - 등록일시는 선택 사항 (미입력 시 현재 날짜)

#### 반 생성
1. `반 관리` → `+ 반 생성`
2. 반 이름, 담임 선생님, 카테고리 선택
3. 학생을 반에 배정

---

## 2. 일상 운영

### 2.1 학생 관리

#### 학생 등록
1. `학생 관리` 메뉴 접속
2. `+ 학생 등록` 버튼 클릭
3. 필수 정보 입력:
   - 학생 이름 (필수)
   - 학부모 연락처 1 (필수)
4. 선택 정보 입력:
   - 학교, 학년, 담임 선생님
   - 반 배정 (다중 선택 가능)
   - 등록일시 (미입력 시 현재 날짜)

#### 학생 정보 수정
1. 학생 목록에서 `수정` 버튼 클릭
2. 정보 수정 후 저장

#### 학생 삭제
- ⚠️ **주의**: 학생 삭제 시 해당 학생의 모든 성적 데이터도 함께 삭제됩니다.
- 관리자 권한 필요

#### Excel 일괄 업로드
1. `Excel 양식 다운로드`로 템플릿 다운로드
2. Excel에 학생 정보 입력
   - **필수 컬럼**: 학생 이름, 학부모 연락처
   - **반 컬럼**: 반 이름을 정확히 입력 (반 관리에서 생성한 이름과 동일)
3. `Excel 업로드`로 파일 선택
4. 업로드 결과 확인

### 2.2 반 관리

#### 반 생성
1. `반 관리` 메뉴 접속
2. 카테고리 선택 (정규반/보강반)
3. `+ 반 생성` 버튼 클릭
4. 반 이름, 담임 선생님, 설명 입력

#### 학생 반 배정
1. `학생 관리`에서 학생 선택
2. `수정` → `반` 체크박스에서 반 선택
3. 여러 반에 동시 배정 가능

#### 반 일괄 이동
1. `학생 관리`에서 여러 학생 선택 (체크박스)
2. `반 이동` 버튼 클릭
3. 이동할 반 선택

### 2.3 성적 입력

#### Daily Report 성적 입력
1. `성적 입력` 메뉴 접속
2. 반 선택
3. 시험일자 선택
4. 각 학생별로 점수 입력:
   - **RT 점수**: 총 문제수, 맞춘 문제수
   - **단어 시험**: 총 문제수, 맞춘 문제수
   - **과제 점수**: 0-100점
   - **코멘트**: 자동 생성 또는 수동 입력
5. 개별 저장 또는 `성적표 생성` (전체 저장)

**특이사항**:
- 단어 시험 84점 이하 시 자동으로 "재시험" 코멘트 생성
- 코멘트는 수동으로 수정 가능
- 반평균은 자동 계산 (0점 학생 제외)

#### 바이먼슬리 테스트 성적 입력
1. `바이먼슬리 테스트 성적 입력` 메뉴 접속
2. 반 선택
3. 시험일자 선택
4. 파트별 점수 입력 (Listening, Grammar, Reading 등)
5. `성적표 생성` 버튼 클릭

### 2.4 성적 발송

#### 개별 발송
1. `성적 발송` 메뉴 접속
2. 발송할 성적 선택
3. `발송` 버튼 클릭
4. 발송 상태 확인 (✅ 발송완료 표시)

#### 일괄 발송
1. `성적 발송` 메뉴 접속
2. 반/날짜 필터로 발송 대상 선택
3. `일괄 발송` 버튼 클릭
4. 발송 결과 확인

**주의사항**:
- 학부모 연락처가 없는 학생은 발송되지 않습니다.
- 발송 실패 시 자동 재시도됩니다.

### 2.5 예약 관리 (관리자 전용)

#### 예약 등록
1. `예약 관리` 메뉴 접속 (관리자만 보임)
2. `+ 예약 등록` 버튼 클릭
3. 필수 정보 입력:
   - 예약자명
   - 방문날짜
   - 방문시간
4. 선택 정보 입력:
   - 학교, 학년, 학생 연락처, 학부모 연락처
5. 저장

#### 레벨테스트 입력
1. 예약자 목록에서 `레벨테스트` 버튼 클릭
2. 파트별 점수 입력
3. 저장

#### 입학 처리
1. 예약자 목록에서 `입학 처리` 버튼 클릭
2. 확인 후 학생으로 자동 등록

### 2.6 보강 관리

#### 보강 일정 등록
1. `반 관리` → `보강 관리` 탭
2. `+ 보강 등록` 버튼 클릭
3. 보강 날짜, 내용 입력
4. 참여 학생 선택
5. 저장

#### 출석 상태 관리
1. 보강 일정 목록에서 `출석 관리` 클릭
2. 각 학생의 출석 상태 선택 (출석/결석/지각)

### 2.7 상담일지

#### 상담 기록
1. `학생 관리`에서 학생 선택
2. `상담` 버튼 클릭
3. 상담 정보 입력:
   - 상담 날짜
   - 상담자
   - 상담 유형 (일반상담/학습상담/진학상담/생활상담)
   - 상담 내용
4. `기록 저장` 클릭

---

## 3. 데이터 백업

### 3.1 정기 백업 (무료 플랜 기준)

#### CSV 백업 (권장)
**주기**: 주 1회 + 큰 변경 전

**백업 대상 테이블**:
1. `students` (학생 정보)
2. `scores` (Daily Report 성적)
3. `bimonthly_scores` (바이먼슬리 성적)
4. `counseling_logs` (상담일지)
5. `reservations` (예약 정보)
6. `level_test_scores` (레벨테스트 성적)

**백업 방법**:
1. Supabase 대시보드 접속
2. `Table Editor` → 테이블 선택
3. 오른쪽 위 `Export` → `CSV` 선택
4. 파일 저장 (예: `backup_2026-02-27_students.csv`)

#### 백업 파일 관리
- 파일명 규칙: `backup_YYYY-MM-DD_테이블명.csv`
- 저장 위치: 안전한 클라우드 스토리지 (Google Drive, Dropbox 등)
- 보관 기간: 최소 3개월

### 3.2 SQL 수정 전 백업

**⚠️ 중요**: SQL을 Supabase에서 실행하기 전에 반드시 백업하세요.

1. 위의 CSV 백업 방법으로 모든 중요 테이블 백업
2. 백업 완료 확인
3. SQL 실행

### 3.3 백업 체크리스트

```
□ students 테이블 백업
□ scores 테이블 백업
□ bimonthly_scores 테이블 백업
□ counseling_logs 테이블 백업
□ reservations 테이블 백업
□ level_test_scores 테이블 백업
□ 백업 파일 클라우드에 업로드
□ 백업 날짜 기록
```

---

## 4. 문제 해결

### 4.1 로그인 문제

**증상**: 로그인이 안 됨
- **해결**: 비밀번호 확인, 관리자에게 문의

**증상**: 권한 오류
- **해결**: 관리자 계정으로 로그인 확인

### 4.2 성적 입력 문제

**증상**: 반평균이 다르게 표시됨
- **해결**: 
  1. 해당 반의 모든 학생 성적 재저장
  2. 0점 학생은 반평균 계산에서 제외됨 (정상)

**증상**: 코멘트가 저장되지 않음
- **해결**: 
  1. 수동으로 입력한 코멘트는 자동 생성 문구가 덮어쓰지 않음
  2. 저장 후 다시 조회하여 확인

### 4.3 발송 문제

**증상**: 카카오톡 발송이 안 됨
- **해결**:
  1. 학부모 연락처 확인
  2. 알리고 API 설정 확인 (관리자에게 문의)
  3. 발송 이력에서 오류 메시지 확인

**증상**: 발송 상태가 표시되지 않음
- **해결**: 페이지 새로고침

### 4.4 데이터 문제

**증상**: 학생 목록이 안 보임
- **해결**:
  1. 필터 초기화
  2. 검색어 확인
  3. 반 선택 확인

**증상**: Excel 업로드 실패
- **해결**:
  1. Excel 양식 형식 확인
  2. 필수 컬럼(학생 이름, 학부모 연락처) 확인
  3. 파일 크기 확인 (5MB 이하)

### 4.5 시스템 오류

**증상**: 페이지가 로드되지 않음
- **해결**:
  1. 브라우저 새로고침
  2. 캐시 삭제
  3. 다른 브라우저로 시도
  4. 관리자에게 문의

---

## 5. 주의사항

### 5.1 데이터 삭제 주의

⚠️ **절대 하지 말아야 할 것**:
- Supabase에서 `TRUNCATE TABLE` 실행
- Supabase에서 `DROP TABLE` 실행
- 운영 DB에서 `production_reset.sql` 실행

✅ **안전한 SQL만 사용**:
- `ALTER TABLE ... ADD COLUMN IF NOT EXISTS`
- `CREATE TABLE IF NOT EXISTS`
- `UPDATE ... WHERE ...`

### 5.2 개발/운영 환경 분리

- **개발**: 로컬 환경 + 개발용 Supabase 프로젝트
- **운영**: 실제 서비스 + 운영용 Supabase 프로젝트

⚠️ **절대 운영 DB에서 실험하지 마세요!**

### 5.3 SQL 실행 전 체크리스트

```
□ 중요 테이블 CSV 백업 완료
□ SQL 내용 검토 (TRUNCATE/DROP 없음 확인)
□ 개발 환경에서 먼저 테스트
□ 운영 DB에 실행할 SQL만 복사
□ 실행 후 데이터 확인
```

### 5.4 성적 입력 시 주의

- **반평균**: 0점 학생은 자동으로 제외됩니다 (정상)
- **코멘트**: 수동 입력한 코멘트는 자동 생성 문구가 덮어쓰지 않습니다
- **중복 입력**: 같은 날짜 같은 학생은 마지막 입력만 유지됩니다

### 5.5 권한 관리

- **관리자**: 모든 메뉴 접근 가능
- **강사**: 예약 관리, 설정 메뉴 접근 불가
- 학생 삭제는 관리자만 가능

---

## 6. 자주 묻는 질문 (FAQ)

### Q1. 학생 등록일시를 변경할 수 있나요?
**A**: 네, 학생 등록/수정 시 "등록일시" 필드에서 날짜를 선택할 수 있습니다.

### Q2. 반평균이 학생마다 다르게 나와요.
**A**: 이전에 저장된 데이터일 수 있습니다. 해당 반의 모든 학생 성적을 재저장하면 동일한 반평균이 적용됩니다.

### Q3. Excel 업로드 시 반이 자동으로 생성되나요?
**A**: 아니요. 반은 `반 관리`에서 먼저 생성해야 합니다. Excel의 `반` 컬럼에는 이미 생성된 반 이름을 정확히 입력해야 합니다.

### Q4. 성적 입력 후 자동으로 발송되나요?
**A**: 아니요. `성적표 생성` 후 `성적 발송` 메뉴에서 별도로 발송해야 합니다.

### Q5. 발송 실패 시 어떻게 하나요?
**A**: 발송 이력에서 실패한 항목을 확인하고, 학부모 연락처를 확인한 후 재발송하세요.

### Q6. 데이터를 복구할 수 있나요?
**A**: 무료 플랜에서는 자동 백업이 없습니다. 정기적으로 CSV 백업을 받아두시기 바랍니다.

### Q7. 여러 반에 학생을 배정할 수 있나요?
**A**: 네, 학생 수정 시 반을 여러 개 선택할 수 있습니다.

### Q8. 보강 일정은 어떻게 관리하나요?
**A**: `반 관리` → `보강 관리` 탭에서 보강 일정을 등록하고 참여 학생을 관리할 수 있습니다.

### Q9. 상담일지는 어디서 볼 수 있나요?
**A**: `학생 관리`에서 학생을 선택한 후 `상담` 버튼을 클릭하면 상담일지를 볼 수 있습니다.

### Q10. 레벨테스트 성적표는 어떻게 발송하나요?
**A**: `예약 관리`에서 레벨테스트를 입력한 후, 성적표 링크를 생성하여 발송할 수 있습니다.

---

## 7. 연락처 및 지원

### 기술 지원
- **GitHub Issues**: 프로젝트 저장소의 Issues 탭
- **이메일**: 관리자에게 문의

### 긴급 상황
- 시스템이 완전히 작동하지 않는 경우 즉시 관리자에게 연락

---

**최종 수정일**: 2026년 2월  
**문서 버전**: 1.0.0
